import{j as s,u as x,t as n}from"./index-CrpPZsvu.js";import{C as h,B as j,a as v}from"./CancelButtonModal-BoD_aq40.js";import{u as g,a as c,Z as b,_ as D,$ as F,a0 as P,B as S}from"./BaseTable-CsPZTHSS.js";import{M as q}from"./ModalDelete-CfgHdyab.js";import{I as B}from"./InputField-CAlv3cmG.js";import{u as C}from"./useQuery-JHOG_8HK.js";import{u as p,S as i}from"./sweetalert2.esm.all-C9US9OKy.js";import"./useReportes-fRvlvEg1.js";import"./eye-DTpaqRd9.js";const E={generalFields:[{required:!0,type:"text",label:"Motivo del prestamo *",name:"nombre"},{required:!1,type:"textarea",label:"Descripción",name:"descripcion"}]},w=()=>{const{view:o,formData:l,handleInputChange:a}=g();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 md:grid-cols-2 mb-7",children:E.generalFields.map(({type:r,label:d,name:t,required:u})=>s.jsx(B,{type:r,label:d,name:t,required:u,value:l[t]||"",onChange:a,disabled:o,classInput:"md:col-span-6"},t))}),s.jsx("hr",{className:"text-gray-300"}),o?s.jsx(h,{}):s.jsx(j,{})]})},I=()=>{const o=c(e=>e.modalType),l=c(e=>e.formData),a=c(e=>e.closeModal),r=x(),{isLoading:d,isError:t,data:u,error:m}=C({queryKey:["modulo-prestamos"],queryFn:P}),f=p({mutationFn:D,onSuccess:()=>{r.invalidateQueries({queryKey:["modulo-prestamos"]}),n.success("Registro agregado"),i.close(),a()},onError:e=>{i.close(),n.error(e.message)}}),y=p({mutationFn:F,onSuccess:()=>{r.invalidateQueries({queryKey:["modulo-prestamos"]}),n.success("Registro actualizado"),a(),i.close()},onError:e=>{n.error(e.message),i.close()}}),M=p({mutationFn:b,onSuccess:()=>{r.invalidateQueries({queryKey:["modulo-prestamos"]}),n.success("Registro eliminado")},onError:e=>{n.error(e.message)}});return{data:u,error:m,isError:t,isLoading:d,handleSubmit:e=>{e.preventDefault(),i.fire({title:'<h2 style="font-family: "sans-serif";">Guardando registro, por favor espere...</h2>',allowEscapeKey:!1,allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{i.showLoading()}}),o==="add"?f.mutate(l):o==="edit"&&y.mutate(l)},handleDelete:e=>{M.mutate(e),a()}}},K=[{key:"nombre",name:"Nombre"},{key:"descripcion",name:"Descripción"}];function $(){const{modalType:o,currentItem:l}=g(),{data:a,isLoading:r,isError:d,error:t,handleSubmit:u,handleDelete:m}=I();return d?s.jsx("div",{children:t.message}):s.jsxs("div",{className:"md:p-4 bg-gray-100",children:[s.jsx(S,{columns:K,data:a||[],title:"Módulo para agregar tipos de préstamos",loading:r}),(o==="add"||o==="edit"||o==="view")&&s.jsx(v,{handleSubmit:u,Inputs:s.jsx(w,{})}),o==="delete"&&l&&s.jsx(q,{handleDelete:m})]})}export{$ as default};
