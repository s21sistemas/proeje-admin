import{u as y,t as n,j as e}from"./index-CrpPZsvu.js";import{C as j,B as M,a as b}from"./CancelButtonModal-BoD_aq40.js";import{a as c,P as v,Q as F,R as C,U as S,u as g,B}from"./BaseTable-CsPZTHSS.js";import{M as D}from"./ModalDelete-CfgHdyab.js";import{u as q}from"./useQuery-JHOG_8HK.js";import{u as p,S as i}from"./sweetalert2.esm.all-C9US9OKy.js";import{I as w}from"./InputField-CAlv3cmG.js";import{C as E}from"./circle-alert-DY7SbZfB.js";import"./useReportes-fRvlvEg1.js";import"./eye-DTpaqRd9.js";const N=()=>{const o=c(s=>s.modalType),l=c(s=>s.formData),a=c(s=>s.closeModal),r=y(),{isLoading:d,isError:t,data:u,error:m}=q({queryKey:["modulos"],queryFn:S}),f=p({mutationFn:F,onSuccess:()=>{r.invalidateQueries({queryKey:["modulos"]}),n.success("Registro agregado"),i.close(),a()},onError:s=>{i.close(),n.error(s.message)}}),h=p({mutationFn:C,onSuccess:()=>{r.invalidateQueries({queryKey:["modulos"]}),n.success("Registro actualizado"),a(),i.close()},onError:s=>{n.error(s.message),i.close()}}),x=p({mutationFn:v,onSuccess:()=>{r.invalidateQueries({queryKey:["modulos"]}),n.success("Registro eliminado")},onError:s=>{n.error(s.message)}});return{data:u,error:m,isError:t,isLoading:d,handleSubmit:s=>{s.preventDefault(),i.fire({title:'<h2 style="font-family: "sans-serif";">Guardando registro, por favor espere...</h2>',allowEscapeKey:!1,allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{i.showLoading()}}),o==="add"?f.mutate(l):o==="edit"&&h.mutate(l)},handleDelete:s=>{x.mutate(s),a()}}},I={generalFields:[{required:!0,type:"text",label:"Nombre",name:"nombre"}]},Q=()=>{const{view:o,formData:l,handleInputChange:a}=g();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 md:grid-cols-2 mb-7",children:[e.jsx("div",{className:"sm:col-span-6 md:col-span-2",children:e.jsxs("div",{className:"bg-[#3674B5] font-semibold p-3 rounded-md text-white flex gap-1 items-center",children:[e.jsx(E,{}),e.jsxs("h3",{children:["Agrega el nombre de la ruta, es decir, si la ruta es:"," ",e.jsx("i",{children:"https://admin.ejemplo.com/recursos-humanos"}),", el nombré de la ruta sería: ",e.jsx("i",{children:"recursos-humanos"})]})]})}),I.generalFields.map(({type:r,label:d,name:t,required:u})=>e.jsx(w,{type:r,label:d,name:t,required:u,value:l[t]||"",onChange:a,disabled:o,classInput:"md:col-span-2"},t))]}),e.jsx("hr",{className:"text-gray-300"}),o?e.jsx(j,{}):e.jsx(M,{})]})},K=[{key:"nombre",name:"Nombre"}];function V(){const{modalType:o,currentItem:l}=g(),{data:a,isLoading:r,isError:d,error:t,handleSubmit:u,handleDelete:m}=N();return d?e.jsx("div",{children:t.message}):e.jsxs("div",{className:"md:p-4 bg-gray-100",children:[e.jsx(B,{columns:K,data:a||[],title:"Módulos",loading:r}),(o==="add"||o==="edit"||o==="view")&&e.jsx(b,{handleSubmit:u,Inputs:e.jsx(Q,{})}),o==="delete"&&l&&e.jsx(D,{handleDelete:m})]})}export{V as default};
