import{u as b,t as i,j as a}from"./index-CrpPZsvu.js";import{C as h,B,a as j}from"./CancelButtonModal-BoD_aq40.js";import{a as m,u as g,B as v}from"./BaseTable-CsPZTHSS.js";import{M}from"./ModalDelete-CfgHdyab.js";import{u as C}from"./useQuery-JHOG_8HK.js";import{u as p,S as l}from"./sweetalert2.esm.all-C9US9OKy.js";import{v as F,w as q,x as E,y as S}from"./useReportes-fRvlvEg1.js";import{I as D}from"./InputField-CAlv3cmG.js";import"./eye-DTpaqRd9.js";const w=()=>{const s=m(e=>e.modalType),n=m(e=>e.formData),t=m(e=>e.closeModal),o=b(),{isLoading:u,isError:r,data:c,error:d}=C({queryKey:["bancos"],queryFn:S}),y=p({mutationFn:q,onSuccess:()=>{o.invalidateQueries({queryKey:["bancos"]}),i.success("Registro agregado"),l.close(),t()},onError:e=>{l.close(),i.error(e.message)}}),f=p({mutationFn:E,onSuccess:()=>{o.invalidateQueries({queryKey:["bancos"]}),i.success("Registro actualizado"),t(),l.close()},onError:e=>{i.error(e.message),l.close()}}),x=p({mutationFn:F,onSuccess:()=>{o.invalidateQueries({queryKey:["bancos"]}),i.success("Registro eliminado")},onError:e=>{i.error(e.message)}});return{data:c,error:d,isError:r,isLoading:u,handleSubmit:e=>{e.preventDefault(),l.fire({title:'<h2 style="font-family: "sans-serif";">Guardando registro, por favor espere...</h2>',allowEscapeKey:!1,allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{l.showLoading()}}),s==="add"?y.mutate(n):s==="edit"&&f.mutate(n)},handleDelete:e=>{x.mutate(e),t()}}},N={generalFields:[{required:!0,type:"text",label:"Nombre",name:"nombre"},{required:!0,type:"text",label:"No. Cuenta",name:"cuenta"},{required:!0,type:"text",label:"CLABE",name:"clabe"}]},I=()=>{const{view:s,formData:n,handleInputChange:t}=g();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 md:grid-cols-2 mb-7",children:N.generalFields.map(({type:o,label:u,name:r,required:c})=>a.jsx(D,{type:o,label:u,name:r,required:c,value:n[r]||"",onChange:t,disabled:s,classInput:"md:col-span-2"},r))}),a.jsx("hr",{className:"text-gray-300"}),s?a.jsx(h,{}):a.jsx(B,{})]})},K=[{key:"nombre",name:"Nombre"},{key:"cuenta",name:"No. Cuenta"},{key:"clabe",name:"CLABE"}];function J(){const{modalType:s,currentItem:n}=g(),{data:t,isLoading:o,isError:u,error:r,handleSubmit:c,handleDelete:d}=w();return u?a.jsx("div",{children:r.message}):a.jsxs("div",{className:"md:p-4 bg-gray-100",children:[a.jsx(v,{columns:K,data:t||[],title:"Bancos",loading:o}),(s==="add"||s==="edit"||s==="view")&&a.jsx(j,{handleSubmit:c,Inputs:a.jsx(I,{})}),s==="delete"&&n&&a.jsx(M,{handleDelete:d})]})}export{J as default};
