import{u as x,t as l,j as s}from"./index-CrpPZsvu.js";import{C as h,B as D,a as j}from"./CancelButtonModal-BoD_aq40.js";import{a as m,a1 as v,a2 as b,a3 as F,a4 as S,u as g,B as q}from"./BaseTable-CsPZTHSS.js";import{M as B}from"./ModalDelete-CfgHdyab.js";import{u as C}from"./useQuery-JHOG_8HK.js";import{u as p,S as i}from"./sweetalert2.esm.all-C9US9OKy.js";import{I as E}from"./InputField-CAlv3cmG.js";import"./useReportes-fRvlvEg1.js";import"./eye-DTpaqRd9.js";const w=()=>{const o=m(e=>e.modalType),n=m(e=>e.formData),a=m(e=>e.closeModal),t=x(),{isLoading:u,isError:r,data:d,error:c}=C({queryKey:["modulo-descuentos"],queryFn:S}),f=p({mutationFn:b,onSuccess:()=>{t.invalidateQueries({queryKey:["modulo-descuentos"]}),l.success("Registro agregado"),i.close(),a()},onError:e=>{i.close(),l.error(e.message)}}),y=p({mutationFn:F,onSuccess:()=>{t.invalidateQueries({queryKey:["modulo-descuentos"]}),l.success("Registro actualizado"),a(),i.close()},onError:e=>{l.error(e.message),i.close()}}),M=p({mutationFn:v,onSuccess:()=>{t.invalidateQueries({queryKey:["modulo-descuentos"]}),l.success("Registro eliminado")},onError:e=>{l.error(e.message)}});return{data:d,error:c,isError:r,isLoading:u,handleSubmit:e=>{e.preventDefault(),i.fire({title:'<h2 style="font-family: "sans-serif";">Guardando registro, por favor espere...</h2>',allowEscapeKey:!1,allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{i.showLoading()}}),o==="add"?f.mutate(n):o==="edit"&&y.mutate(n)},handleDelete:e=>{M.mutate(e),a()}}},I={generalFields:[{required:!0,type:"text",label:"Motivo del descuento *",name:"nombre"},{required:!1,type:"textarea",label:"Descripción",name:"descripcion"}]},K=()=>{const{view:o,formData:n,handleInputChange:a}=g();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 md:grid-cols-2 mb-7",children:I.generalFields.map(({type:t,label:u,name:r,required:d})=>s.jsx(E,{type:t,label:u,name:r,required:d,value:n[r]||"",onChange:a,disabled:o,classInput:"md:col-span-6"},r))}),s.jsx("hr",{className:"text-gray-300"}),o?s.jsx(h,{}):s.jsx(D,{})]})},Q=[{key:"nombre",name:"Nombre"},{key:"descripcion",name:"Descripción"}];function J(){const{modalType:o,currentItem:n}=g(),{data:a,isLoading:t,isError:u,error:r,handleSubmit:d,handleDelete:c}=w();return u?s.jsx("div",{children:r.message}):s.jsxs("div",{className:"md:p-4 bg-gray-100",children:[s.jsx(q,{columns:Q,data:a||[],title:"Módulo para agregar tipos de descuento",loading:t}),(o==="add"||o==="edit"||o==="view")&&s.jsx(j,{handleSubmit:d,Inputs:s.jsx(K,{})}),o==="delete"&&n&&s.jsx(B,{handleDelete:c})]})}export{J as default};
