import{r as j,j as e}from"./index-CrpPZsvu.js";import{C as b,B as y,a as v}from"./CancelButtonModal-BoD_aq40.js";import{u as h,B as f}from"./BaseTable-CsPZTHSS.js";import{u as q}from"./useQuery-JHOG_8HK.js";import{o as F,c as N,d as w}from"./firebaseConfig-enmzD80w.js";import{A as d}from"./AlertaCard-CTxQbRQP.js";import{I as S}from"./InputField-CAlv3cmG.js";import"./useReportes-fRvlvEg1.js";import"./eye-DTpaqRd9.js";import"./circle-alert-DY7SbZfB.js";const x=()=>new Promise(t=>{const s=F(N(w,"reportesSupervisor"),n=>{const a=n.docs.map(l=>({id:l.id,...l.data()}));t({data:a,unsubscribe:s})})}),E=()=>{var s;const t=q({queryKey:["reportes-supervisor"],queryFn:async()=>{const{data:n,unsubscribe:a}=await x();return{data:n,unsubscribe:a}},refetchOnWindowFocus:!1,staleTime:1/0,enabled:!1});return j.useEffect(()=>{let n=null;return x().then(({unsubscribe:a})=>{t.refetch(),n=a}),()=>{n&&n()}},[]),{data:((s=t.data)==null?void 0:s.data)??[],isLoading:t.isLoading,isError:t.isError,error:t.error}},I={generalFields:[{required:!1,type:"text",label:"Orden de servicio",name:"idServicio"},{required:!1,type:"text",label:"Supervisor",name:"supervisorId"},{required:!1,type:"text",label:"Elemento que recibe el uniforme",name:"elementoRecibe"},{required:!1,type:"text",label:"Elemento que entrega el uniforme",name:"elementoEntrega"},{required:!1,type:"text",label:"Fecha",name:"fecha"},{required:!1,type:"text",label:"Tipo",name:"tipo"},{required:!1,type:"text",label:"Turno",name:"turno"},{required:!1,type:"text",label:"Zona",name:"zona"}]},C=()=>{var a,l,c,p,u,m;const{view:t,formData:s,handleInputChange:n}=h();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 md:grid-cols-2 mb-7",children:[I.generalFields.map(({type:r,label:i,name:o,required:g})=>e.jsx(S,{type:r,label:i,name:o,required:g,value:s[o]||"",onChange:n,disabled:t,classInput:"md:col-span-3"},o)),((a=s==null?void 0:s.proyeccion)==null?void 0:a.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:col-span-6 md:col-span-2",children:e.jsx(d,{text:"Proyecciones"})}),(l=s==null?void 0:s.proyeccion)==null?void 0:l.map((r,i)=>e.jsx("div",{className:"md:col-span-3 border border-gray-300 p-4 rounded-lg shadow-sm bg-white",children:e.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-800",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"¿Quién cubre?"})," ",r.cubre]}),e.jsxs("li",{children:[e.jsx("strong",{children:"¿Quién falta?"})," ",r.faltas]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Servicio"})," ",r.servicio]})]})},`proyeccion-${i}`))]}),((c=s==null?void 0:s.consignas)==null?void 0:c.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:col-span-6 md:col-span-2",children:e.jsx(d,{text:"Consignas"})}),(p=s==null?void 0:s.consignas)==null?void 0:p.map((r,i)=>e.jsx("div",{className:"md:col-span-3 border border-gray-300 p-4 rounded-lg shadow-sm bg-white",children:e.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-800",children:e.jsxs("li",{children:[e.jsxs("strong",{children:["Consigna ",i+1,":"]})," ",r!=null&&r.texto?r.texto:r]})})},`consignas-${i}`))]}),((u=s==null?void 0:s.observaciones)==null?void 0:u.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sm:col-span-6 md:col-span-2",children:e.jsx(d,{text:"Observaciones"})}),(m=s==null?void 0:s.observaciones)==null?void 0:m.map((r,i)=>e.jsx("div",{className:"md:col-span-3 border border-gray-300 p-4 rounded-lg shadow-sm bg-white",children:e.jsx("ul",{className:"list-disc pl-5 text-sm text-gray-800",children:e.jsxs("li",{children:[e.jsxs("strong",{children:["Observación ",i+1,":"]})," ",r!=null&&r.texto?r.texto:r]})})},`observaciones-${i}`))]})]}),e.jsx("hr",{className:"text-gray-300"}),t?e.jsx(b,{}):e.jsx(y,{})]})},R=[{key:"servicioId",name:"Orden"},{key:"supervisorId",name:"Supervisor"},{key:"tipo",name:"Tipo"},{key:"zona",name:"Zona"},{key:"turno",name:"Turno"},{key:"fecha",name:"Fecha"}];function A(){const{modalType:t}=h(),{data:s,isLoading:n,isError:a,error:l}=E();return a?e.jsx("div",{children:l.message}):e.jsxs("div",{className:"md:p-4 bg-gray-100",children:[e.jsx(f,{columns:R,data:s||[],title:"Reporte de supervisores",loading:n}),t==="view"&&e.jsx(v,{Inputs:e.jsx(C,{})})]})}export{A as default};
