import{u as x,t as l,j as a}from"./index-CB-Ik059.js";import{I as h,C as B,B as j,a as v}from"./CancelButtonModal-DFIIInB4.js";import{u as m,f as M,h as C,i as F,j as q,d as g,B as E}from"./BaseTable-lMESkOGa.js";import{M as S}from"./ModalDelete-Bkq3cXQz.js";import{u as D}from"./configAxios-zIrC1_jU.js";import{u as p,S as i}from"./sweetalert2.esm.all-nsIXK1sI.js";import"./square-pen-D170uhu7.js";const N=()=>{const s=m(e=>e.modalType),n=m(e=>e.formData),t=m(e=>e.closeModal),o=x(),{isLoading:u,isError:r,data:c,error:d}=D({queryKey:["bancos"],queryFn:q}),y=p({mutationFn:C,onSuccess:()=>{o.invalidateQueries({queryKey:["bancos"]}),l.success("Registro agregado"),i.close(),t()},onError:e=>{i.close(),l.error(e.message)}}),f=p({mutationFn:F,onSuccess:()=>{o.invalidateQueries({queryKey:["bancos"]}),l.success("Registro actualizado"),t(),i.close()},onError:e=>{l.error(e.message),i.close()}}),b=p({mutationFn:M,onSuccess:()=>{o.invalidateQueries({queryKey:["bancos"]}),l.success("Registro eliminado")},onError:e=>{l.error(e.message)}});return{data:c,error:d,isError:r,isLoading:u,handleSubmit:e=>{e.preventDefault(),i.fire({title:'<h2 style="font-family: "sans-serif";">Guardando registro, por favor espere...</h2>',allowEscapeKey:!1,allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{i.showLoading()}}),s==="add"?y.mutate(n):s==="edit"&&f.mutate(n)},handleDelete:e=>{b.mutate(e),t()}}},w={generalFields:[{required:!0,type:"text",label:"Nombre",name:"nombre"},{required:!0,type:"text",label:"No. Cuenta",name:"cuenta"},{required:!0,type:"text",label:"CLABE",name:"clabe"}]},I=()=>{const{view:s,formData:n,handleInputChange:t}=g();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 md:grid-cols-2 mb-7",children:w.generalFields.map(({type:o,label:u,name:r,required:c})=>a.jsx(h,{type:o,label:u,name:r,required:c,value:n[r]||"",onChange:t,disabled:s,classInput:"md:col-span-2"},r))}),a.jsx("hr",{className:"text-gray-300"}),s?a.jsx(B,{}):a.jsx(j,{})]})},K=[{key:"nombre",name:"Nombre"},{key:"cuenta",name:"No. Cuenta"},{key:"clabe",name:"CLABE"}];function G(){const{modalType:s,currentItem:n}=g(),{data:t,isLoading:o,isError:u,error:r,handleSubmit:c,handleDelete:d}=N();return u?a.jsx("div",{children:r.message}):a.jsxs("div",{className:"md:p-4 bg-gray-100",children:[a.jsx(E,{columns:K,data:t||[],title:"Bancos",loading:o}),(s==="add"||s==="edit"||s==="view")&&a.jsx(v,{handleSubmit:c,Inputs:a.jsx(I,{})}),s==="delete"&&n&&a.jsx(S,{handleDelete:d})]})}export{G as default};
